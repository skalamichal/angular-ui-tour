!function(a){"use strict";a.config(["$uibTooltipProvider",function(a){a.setTriggers({uiTourShow:"uiTourHide"})}])}(angular.module("bm.uiTour",["ngSanitize","ui.bootstrap","smoothScroll","ezNg","cfp.hotkeys"])),function(a){"use strict";a.factory("uiTourBackdrop",["TourConfig","$document","$uibPosition","$window",function(a,b,c,d){function e(){o.addClass("no-scrolling"),o.on("touchmove",q)}function f(){o.removeClass("no-scrolling"),o.off("touchmove",q)}function g(b){b.addClass("tour-backdrop").css({display:"none",zIndex:a.get("backdropZIndex")}),o.append(b)}function h(){p.top.css("display","block"),p.bottom.css("display","block"),p.left.css("display","block"),p.right.css("display","block")}function i(){p.top.css("display","none"),p.bottom.css("display","none"),p.left.css("display","none"),p.right.css("display","none")}function j(a,e,f){var g,h,i,j=Math.max(b[0].documentElement.clientWidth,d.innerWidth||0),k=Math.max(b[0].documentElement.clientHeight,d.innerHeight||0),l={top:1e4,left:1e4,right:0,bottom:0},m={top:1e4,left:1e4,right:1e4,bottom:1e4};g=a.reduce(function(a,b){var d=c.offset(b);return a?{top:Math.min(a.top,d.top),left:Math.min(a.left,d.left),bottom:Math.max(a.bottom,d.top+d.height),right:Math.max(a.right,d.left+d.width)}:d},l),h=a.reduce(function(a,b){var d=c.viewportOffset(b);return a?{top:Math.min(a.top,d.top),left:Math.min(a.left,d.left),bottom:Math.min(a.bottom,d.bottom),right:Math.min(a.right,d.right)}:d},m),g.width=g.right-g.left,g.height=g.bottom-g.top,g={top:g.top-f,left:g.left-f,width:g.width+2*f,height:g.height+2*f},i=c.offset(o),e&&angular.extend(g,h),p.top.css({position:e?"fixed":"absolute",top:0,left:0,width:"100%",height:g.top+"px"}),p.bottom.css({position:e?"fixed":"absolute",left:0,width:"100%",height:Math.max(i.top+i.height-g.top-g.height,k-g.top-g.height)+"px",top:g.top+g.height+"px"}),p.left.css({position:e?"fixed":"absolute",top:g.top+"px",width:g.left+"px",height:g.height+"px"}),p.right.css({position:e?"fixed":"absolute",top:g.top+"px",width:Math.max(i.left+i.width-g.left-g.width,j-g.left-g.width)+"px",height:g.height+"px",left:g.left+g.width+"px"})}function k(a){for(var b=a[0];b;)if(b=b.parentNode,"table"===b.tagName.toLowerCase())return b}function l(a){var b,c=Array.prototype.indexOf.call(a[0].parentNode.children,a[0]),d=k(a),e=[];for(b=d.querySelectorAll(["tbody > tr > td:nth-child(",c+1,")"].join("")),c=0;c<b.length;c++)e.push(angular.element(b[c]));return[a].concat(e)}var m,n={},o=angular.element(b[0].body),p={top:angular.element(b[0].createElement("div")),bottom:angular.element(b[0].createElement("div")),left:angular.element(b[0].createElement("div")),right:angular.element(b[0].createElement("div"))},q=function(a){a.preventDefault()};return function(){var a=".no-scrolling",c="height: 100%; overflow: hidden;",d=b[0].createElement("style");d.type="text/css",b[0].getElementsByTagName("head")[0].appendChild(d),d.sheet||d.sheet.insertRule?d.sheet.insertRule(a+"{"+c+"}",0):(d.styleSheet||d.sheet).addRule(a,c)}(),g(p.top),g(p.bottom),g(p.left),g(p.right),n.createForElement=function(a,b,c,f,g){var i=f?l(a):[a];j(i,c,g),h(),m=function(){j(a,c,g)},angular.element(d).on("resize",m),b&&e()},n.hide=function(){i(),f(),angular.element(d).off("resize",m)},n}])}(angular.module("bm.uiTour")),function(a){"use strict";a.provider("TourConfig",[function(){var a={placement:"top",animation:!0,popupDelay:1,closePopupDelay:0,enable:!0,appendToBody:!1,popupClass:"",orphan:!1,backdrop:!1,backdropZIndex:1e4,scrollOffset:100,scrollIntoView:!0,useUiRouter:!1,useHotkeys:!1,tableColumn:!1,margin:0,onStart:null,onEnd:null,onPause:null,onResume:null,onNext:null,onPrev:null,onShow:null,onShown:null,onHide:null,onHidden:null};this.set=function(b,c){a[b]=c},this.$get=["$q",function(b){var c={};return c.get=function(b){return a[b]},c.getAll=function(){return angular.copy(a)},function(){angular.forEach(a,function(c,d){0===d.indexOf("on")&&angular.isFunction(c)&&(a[d]=function(){return b.resolve(c())})})}(),c}]}])}(angular.module("bm.uiTour")),function(a){"use strict";a.controller("uiTourController",["$timeout","$q","$filter","TourConfig","uiTourBackdrop","uiTourService","ezEventEmitter","hotkeys",function(a,b,c,d,e,f,g,h){function i(){return b(function(b){a(b)})}function j(){return y}function k(a){y=a}function l(a){return j()?j().config("nextPath")&&a>0?null:j().config("prevPath")&&a<0?null:x[x.indexOf(j())+a]:null}function m(a){if(angular.isNumber(a))return x[a];if(angular.isString(a))return x.filter(function(b){return b.stepId===a})[0];if(angular.isObject(a)){if(~x.indexOf(a))return a;if(a.stepId)return x.filter(function(b){return b.stepId===a.stepId})[0]}return null}function n(){return l(1)}function o(){return l(-1)}function p(){return!!(n()||j()&&j().config("nextPath"))}function q(){return!!(o()||j()&&j().config("prevPath"))}function r(a,c){return b(function(b){a.element[0].dispatchEvent(new CustomEvent(c)),b()})}function s(a){return(a||b.resolve)()}function t(){h.add({combo:"esc",description:"End tour",callback:function(){w.end()}}),h.add({combo:"right",description:"Go to next step",callback:function(){p()&&w.next()}}),h.add({combo:"left",description:"Go to previous step",callback:function(){q()&&w.prev()}})}function u(){h.del("esc"),h.del("right"),h.del("left")}var v,w=this,x=[],y=null,z={OFF:0,ON:1,PAUSED:2},A=z.OFF,B=d.getAll();g.mixin(w),w.addStep=function(a){~x.indexOf(a)||(x.push(a),x=c("orderBy")(x,"order"),w.emit("stepAdded",a),v&&v(a))},w.removeStep=function(a){var b=x.indexOf(a);b!==-1&&(x.splice(b,1),w.emit("stepRemoved",a))},w.reorderStep=function(a){w.removeStep(a),w.addStep(a),w.emit("stepsReordered",a)},w.hasStep=function(a){return!!m(a)},w.showStep=function(a){return a?s(a.config("onShow")).then(function(){a.config("backdrop")&&e.createForElement(a.element,a.config("preventScrolling"),a.config("fixed"),a.config("tableColumn"),a.config("margin"))}).then(function(){return a.element.addClass("ui-tour-active-step"),r(a,"uiTourShow")}).then(function(){return i()}).then(function(){return s(a.config("onShown"))}).then(function(){w.emit("stepShown",a),a.isNext=p,a.isPrev=q}):b.reject("No step.")},w.hideStep=function(a){return a?s(a.config("onHide")).then(function(){return a.element.removeClass("ui-tour-active-step"),r(a,"uiTourHide")}).then(function(){return i()}).then(function(){return s(a.config("onHidden"))}).then(function(){w.emit("stepHidden",a)}):b.reject("No step.")},w.waitFor=function(a){w.pause(),v=function(b){b.stepId===a&&(k(x[x.indexOf(b)]),w.resume(),v=null)}},w.config=function(a){return B[a]},w.init=function(a){return B=angular.extend(B,a),w.options=B,f._registerTour(w),w.initialized=!0,w.emit("initialized"),w},w.destroy=function(){f._unregisterTour(w)},w.start=function(){return w.startAt(0)},w.startAt=function(a){return s(B.onStart).then(function(){var b=m(a);return k(b),A=z.ON,w.emit("started",b),B.useHotkeys&&t(),w.showStep(j())})},w.end=function(){return s(B.onEnd).then(function(){if(j())return e.hide(),w.hideStep(j())}).then(function(){k(null),w.emit("ended"),A=z.OFF,B.useHotkeys&&u()})},w.pause=function(){return s(B.onPause).then(function(){return A=z.PAUSED,e.hide(),w.hideStep(j())}).then(function(){w.emit("paused",j())})},w.resume=function(){return s(B.onResume).then(function(){return A=z.ON,w.emit("resumed",j()),w.showStep(j())})},w.next=function(){return w.goTo("$next")},w.prev=function(){return w.goTo("$prev")},w.goTo=function(a){var c=j(),d=m(a),f={$prev:{getStep:o,preEvent:"onPrev",navCheck:"prevStep"},$next:{getStep:n,preEvent:"onNext",navCheck:"nextStep"}};return"$prev"===a||"$next"===a?s(c.config(f[a].preEvent)).then(function(){return w.hideStep(c)}).then(function(){c[f[a].navCheck]&&c[f[a].navCheck]===j().stepId||(k(f[a].getStep()),w.emit("stepChanged",j())),j()&&!j().config("backdrop")&&e.hide()}).then(function(){return j()?w.showStep(j()):void w.end()}):d?w.hideStep(j()).then(function(){return j().config("backdrop")&&!d.config("backdrop")&&e.hide(),k(d),w.emit("stepChanged",j()),w.showStep(d)}):b.reject("No step.")},w.getCurrentStep=function(){return j()},w.getStatus=function(){return A},w.status=z,w.getSteps=function(){return[].concat(x)},w.stepCount=function(){return x.length},w._getSteps=function(){return x},w._getCurrentStep=j,w._setCurrentStep=k}])}(angular.module("bm.uiTour")),function(a){"use strict";a.directive("uiTour",["TourHelpers",function(a){return{restrict:"EA",scope:!0,controller:"uiTourController",link:function(b,c,d,e){var f={name:d.uiTour},g="onReady onStart onEnd onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" "),h="placement animation popupDelay closePopupDelay enable appendToBody popupClass orphan backdrop scrollOffset scrollIntoView useUiRouter useHotkeys".split(" ");a.attachInterpolatedValues(d,f,h,"uiTour"),a.attachEventHandlers(b,d,f,g,"uiTour"),d[a.getAttrName("templateUrl","uiTour")]&&(f.templateUrl=b.$eval(d[a.getAttrName("templateUrl","uiTour")])),d[a.getAttrName("options")]&&angular.extend(f,b.$eval(d[a.getAttrName("options")])),b.tour=e.init(f),"function"==typeof f.onReady&&f.onReady(),b.$on("$destroy",function(){e.destroy()})}}}])}(angular.module("bm.uiTour")),function(a){"use strict";a.factory("TourHelpers",["$templateCache","$http","$compile","$location","TourConfig","$q","$injector","$timeout",function(a,b,c,d,e,f,g,h){function i(a){return"true"===a||"false"!==a&&a}var j,k,l={};return g.has("$state")&&(k=g.get("$state")),j=l.safeApply=function(a,b){var c=a.$root.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():a.$apply(b)},l.attachTourConfigProperties=function(a,b,c,d){angular.forEach(d,function(a){!b[l.getAttrName(a)]&&angular.isDefined(c.config(a))&&b.$set(l.getAttrName(a),String(c.config(a)))})},l.attachEventHandlers=function(a,b,c,d,e){angular.forEach(d,function(d){var g=l.getAttrName(d,e);b[g]&&(c[d]=function(){return f(function(c){j(a,function(){c(a.$eval(b[g]))})})})})},l.attachInterpolatedValues=function(a,b,c,d){angular.forEach(c,function(c){var e=l.getAttrName(c,d);a[e]&&(b[c]=i(a[e]),a.$observe(e,function(a){b[c]=i(a)}))})},l.setRedirect=function(a,b,c,e,g){var i=a[c];a[c]=function(c){return f(function(f){i&&i(c),b.waitFor(g),a.config("useUiRouter")?k.go(e).then(f):(d.path(e),h(f))})}},l.getAttrName=function(a,b){return(b||"tourStep")+a.charAt(0).toUpperCase()+a.substr(1)},l}])}(angular.module("bm.uiTour")),function(a){"use strict";a.factory("uiTourService",["$controller",function(a){var b={},c=[];return b.getTour=function(){return c[0]},b.getTourByName=function(a){return c.filter(function(b){return b.options.name===a})[0]},b.getTourByElement=function(a){return angular.element(a).controller("uiTour")},b.createDetachedTour=function(b,c){if(!b)throw{name:"ParameterMissingError",message:"A unique tour name is required for creating a detached tour."};return c=c||{},c.name=b,a("uiTourController").init(c)},b._registerTour=function(a){c.push(a)},b._unregisterTour=function(a){c.splice(c.indexOf(a),1)},b}])}(angular.module("bm.uiTour")),function(a){"use strict";a.directive("tourStep",["TourConfig","TourHelpers","uiTourService","$uibTooltip","$q","$sce",function(a,b,c,d,e,f){var g=d("tourStep","tourStep","uiTourShow",{popupDelay:1});return{restrict:"EA",scope:!0,require:"?^uiTour",compile:function(a,d){d.tourStep||d.$set("tourStep","'PH'");var e=g.compile(a,d);return function(a,d,g,h){function i(){b.attachTourConfigProperties(a,g,n,q,"tourStep"),e(a,d,g)}var j;if(g[b.getAttrName("belongsTo")]?j=c.getTourByName(g[b.getAttrName("belongsTo")]):h&&(j=h),!j)throw{name:"DependencyMissingError",message:"No tour provided for tour step."};var k,l,m,n={stepId:g.tourStep,enabled:!0,config:function(a){return angular.isDefined(n[a])?n[a]:j.config(a)}},o="onShow onShown onHide onHidden onNext onPrev".split(" "),p="content title animation placement backdrop orphan popupDelay popupCloseDelay popupClass fixed preventScrolling scrollIntoView nextStep prevStep nextPath prevPath scrollOffset tableColumn margin".split(" "),q="animation appendToBody placement popupDelay popupCloseDelay".split(" ");b.attachInterpolatedValues(g,n,p),k=g.$observe(b.getAttrName("order"),function(a){n.order=isNaN(1*a)?0:1*a,j.hasStep(n)&&j.reorderStep(n)}),l=g.$observe(b.getAttrName("enabled"),function(a){n.enabled="false"!==a,n.enabled?j.addStep(n):j.removeStep(n)}),m=g.$observe(b.getAttrName("content"),function(a){a&&(n.trustedContent=f.trustAsHtml(n.content))}),b.attachEventHandlers(a,g,n,o),g[b.getAttrName("templateUrl")]&&(n.templateUrl=a.$eval(g[b.getAttrName("templateUrl")])),g[b.getAttrName("options")]&&angular.extend(n,a.$eval(g[b.getAttrName("options")])),n.nextPath&&(n.redirectNext=!0,b.setRedirect(n,j,"onNext",n.nextPath,n.nextStep)),n.prevPath&&(n.redirectPrev=!0,b.setRedirect(n,j,"onPrev",n.prevPath,n.prevStep)),n.trustedContent=f.trustAsHtml(n.content),a.tourStep=n,a.tour=j,j.initialized?(i(),j.addStep(n)):j.once("initialized",function(){i(),j.addStep(n)}),Object.defineProperties(n,{element:{value:d}}),a.$on("$destroy",function(){j.removeStep(n),k(),l(),m()})}}}}]),a.directive("tourStepPopup",["TourConfig","smoothScroll","ezComponentHelpers","$uibPosition",function(a,b,c,d){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"tour-step-popup.html",link:function(e,f,g){var h=e.originScope().tourStep,i=c.apply(null,arguments),j=h.config("scrollOffset"),k=!1;g.$set("uib-popover-popup","uib-popover-popup"),f.css({zIndex:a.get("backdropZIndex")+2,display:"block"}),f.addClass([h.config("popupClass"),"popover"].join(" ")),h.config("fixed")&&f.css("position","fixed"),h.config("orphan")&&i.useStyles(":scope {   position: fixed;   top: 50% !important;   left: 50% !important;   margin: 0 !important;   -ms-transform: translateX(-50%) translateY(-50%);   -moz-transform: translateX(-50%) translateY(-50%);   -webkit-transform: translateX(-50%) translateY(-50%);   transform: translateX(-50%) translateY(-50%);}.arrow {   display: none;}"),e.$watch(function(){var a=d.offset(f),c=a.width&&a.height;c&&!h.config("orphan")&&h.config("scrollIntoView")&&!k&&(k=!0,b(f[0],{offset:j,callbackAfter:function(){k=!1}}))})}}}])}(angular.module("bm.uiTour")),angular.module("bm.uiTour").run(["$templateCache",function(a){a.put("tour-step-popup.html",'<div class="arrow"></div>\n\n<div class="popover-inner tour-step-inner">\n    <h3 class="popover-title tour-step-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content tour-step-content"\n         uib-tooltip-template-transclude="originScope().tourStep.config(\'templateUrl\') || \'tour-step-template.html\'"\n         tooltip-template-transclude-scope="originScope()"></div>\n</div>\n'),a.put("tour-step-template.html",'<div>\n    <div class="popover-content tour-step-content" ng-bind-html="tourStep.trustedContent"></div>\n    <div class="popover-navigation tour-step-navigation">\n        <div class="btn-group">\n            <button class="btn btn-sm btn-default" ng-if="tourStep.isPrev()" ng-click="tour.prev()">&laquo; Prev</button>\n            <button class="btn btn-sm btn-default" ng-if="tourStep.isNext()" ng-click="tour.next()">Next &raquo;</button>\n            <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause"\n                    data-resume-text="Resume" ng-click="tour.pause()">Pause\n            </button>\n        </div>\n        <button class="btn btn-sm btn-default" data-role="end" ng-click="tour.end()">End tour</button>\n    </div>\n</div>\n')}]),function(a){function b(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}b.prototype=a.Event.prototype,a.CustomEvent=b}(window);